<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–≠–∫–æ-–°–æ—Ä—Ç–µ—Ä - –ò–≥—Ä–∞ –æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ –º—É—Å–æ—Ä–∞</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      @import url("https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap");

      body {
        font-family: "Nunito", sans-serif;
        background: linear-gradient(135deg, #4caf50, #81c784, #a5d6a7);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
        animation: bounceIn 1s ease-out;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 25px;
        padding: 30px;
        box-shadow: 0 15px 35px rgba(76, 175, 80, 0.2);
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        animation: shimmer 3s infinite;
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
        100% {
          transform: translateX(100%) translateY(100%) rotate(45deg);
        }
      }

      .title {
        font-size: 4rem;
        background: linear-gradient(
          135deg,
          #ff6b6b,
          #4ecdc4,
          #45b7d1,
          #96ceb4,
          #feca57
        );
        background-size: 300% 300%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 800;
        margin-bottom: 15px;
        letter-spacing: -2px;
        animation: rainbowText 4s ease-in-out infinite;
        text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        position: relative;
        z-index: 1;
      }

      @keyframes rainbowText {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      .subtitle {
        font-size: 1.4rem;
        color: #2e7d32;
        margin-bottom: 20px;
        font-weight: 600;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 1;
      }

      .fun-icons {
        font-size: 2rem;
        margin: 15px 0;
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .game-area {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        margin-bottom: 20px;
      }

      .materials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .material-card {
        background: linear-gradient(145deg, #ffffff, #f8f9fa);
        border-radius: 20px;
        padding: 25px;
        text-align: center;
        box-shadow: 0 8px 25px rgba(76, 175, 80, 0.15);
        transition: all 0.3s ease;
        cursor: pointer;
        border: none;
      }

      .material-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 15px 35px rgba(76, 175, 80, 0.25);
      }

      .material-card.selected {
        background: linear-gradient(145deg, #e8f5e8, #c8e6c9);
        box-shadow: 0 12px 30px rgba(76, 175, 80, 0.3);
        transform: translateY(-5px);
      }

      .material-card.completed {
        background: linear-gradient(145deg, #4caf50, #45a049);
        color: white;
        box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
      }

      .material-card.completed .material-name,
      .material-card.completed p {
        color: white;
      }

      .material-card.locked {
        background: linear-gradient(145deg, #f5f5f5, #e0e0e0);
        color: #999;
        cursor: not-allowed;
        opacity: 0.6;
      }

      .material-card.locked:hover {
        transform: none;
        box-shadow: 0 8px 25px rgba(76, 175, 80, 0.15);
      }

      .material-card.locked .material-name,
      .material-card.locked p {
        color: #999;
      }

      .material-icon {
        font-size: 3rem;
        margin-bottom: 10px;
        display: block;
        text-shadow: none;
        border: none;
        outline: none;
      }

      .material-name {
        font-size: 1.3rem;
        font-weight: bold;
        color: #2e7d32;
        margin-bottom: 10px;
      }

      .steps-container {
        margin-top: 30px;
        padding: 20px;
        background: #f1f8e9;
        border-radius: 15px;
        border: 2px dashed #4caf50;
      }

      .steps-title {
        font-size: 1.5rem;
        color: #2e7d32;
        text-align: center;
        margin-bottom: 20px;
      }

      .steps-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .correct-steps-area {
        background: linear-gradient(145deg, #e8f5e8, #c8e6c9);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        min-height: 100px;
        border: 2px dashed #4caf50;
      }

      .correct-steps-title {
        text-align: center;
        color: #2e7d32;
        font-weight: 600;
        margin-bottom: 15px;
      }

      .correct-steps-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
      }

      .correct-order {
        background: linear-gradient(145deg, #4caf50, #45a049) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3) !important;
        animation: slideToPosition 0.8s ease;
        position: relative;
      }

      .correct-order::before {
        content: attr(data-order);
        position: absolute;
        top: -8px;
        left: -8px;
        background: #ff9800;
        color: white;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .step-item {
        background: linear-gradient(145deg, #ffffff, #f8f9fa);
        padding: 18px;
        border-radius: 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        min-height: 90px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 500;
      }

      .step-item:hover {
        box-shadow: 0 8px 20px rgba(76, 175, 80, 0.2);
        transform: translateY(-3px);
      }

      .step-item.correct {
        background: #c8e6c9;
        border-color: #4caf50;
        animation: correctAnswer 0.6s ease;
      }

      .step-item.incorrect {
        background: #ffcdd2;
        border-color: #f44336;
        animation: shake 0.5s ease;
      }

      .controls {
        text-align: center;
        margin: 20px 0;
      }

      .btn {
        background: linear-gradient(145deg, #4caf50, #45a049);
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 1.1rem;
        border-radius: 25px;
        cursor: pointer;
        margin: 0 10px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      }

      .btn:disabled {
        background: #cccccc;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .hint-box {
        background: #fff3e0;
        border: 2px solid #ff9800;
        border-radius: 15px;
        padding: 20px;
        margin: 20px 0;
        text-align: center;
        display: none;
      }

      .hint-box.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      .progress-board {
        background: linear-gradient(145deg, #4caf50, #388e3c);
        color: white;
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 20px;
        position: relative;
      }

      .tree-container {
        font-size: 4rem;
        margin: 10px 0;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-shadow: none;
        border: none;
        outline: none;
      }

      .timer {
        font-size: 1.5rem;
        font-weight: bold;
        color: #ffeb3b;
      }

      .celebration {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(76, 175, 80, 0.9);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .celebration.show {
        display: flex;
        animation: fadeIn 0.5s ease;
      }

      .celebration-content {
        background: white;
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        max-width: 600px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      }

      .celebration-title {
        font-size: 2.5rem;
        color: #4caf50;
        margin-bottom: 20px;
        animation: bounce 1s infinite;
      }

      .final-celebration {
        background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
        background-size: 400% 400%;
        animation: gradientShift 3s ease infinite;
      }

      .firework {
        position: absolute;
        width: 4px;
        height: 4px;
        border-radius: 50%;
        animation: fireworkExplode 2s ease-out infinite;
      }

      @keyframes fireworkExplode {
        0% {
          transform: scale(0) translate(0, 0);
          opacity: 1;
        }
        50% {
          transform: scale(1.5) translate(var(--dx, 0), var(--dy, 0));
          opacity: 0.9;
        }
        100% {
          transform: scale(3)
            translate(calc(var(--dx, 0) * 2), calc(var(--dy, 0) * 2));
          opacity: 0;
        }
      }

      .trophy-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 20px;
        max-width: 400px;
      }

      .trophy {
        font-size: 3rem;
        animation: bounce 2s infinite;
        flex-shrink: 0;
      }

      .trophy:nth-child(1) {
        animation-delay: 0s;
      }

      .trophy:nth-child(3) {
        animation-delay: 0.5s;
      }

      .celebration-title {
        font-size: 2.5rem;
        color: #4caf50;
        margin: 0;
        text-align: center;
        flex-grow: 1;
      }

      .final-text-container {
        text-align: center;
        margin: 25px 0;
        padding: 0 20px;
      }

      .final-main-text {
        font-size: 1.8rem;
        font-weight: 700;
        color: #2e7d32;
        margin: 20px 0;
        line-height: 1.3;
      }

      .final-hero-text {
        font-size: 1.3rem;
        color: #4caf50;
        font-weight: bold;
        margin: 20px 0;
        background: linear-gradient(135deg, #4caf50, #81c784);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1.4;
      }

      .final-description {
        font-size: 1.1rem;
        color: #555;
        margin: 20px 0;
        line-height: 1.5;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
      }

      .final-footer {
        text-align: center;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 2px solid #e8f5e8;
      }

      .final-credits {
        font-size: 0.95rem;
        color: #666;
        margin-bottom: 25px;
        font-style: italic;
      }

      .restart-btn {
        background: linear-gradient(145deg, #ff9800, #f57c00);
        color: white;
        border: none;
        padding: 12px 25px;
        font-size: 1rem;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
        font-weight: 600;
      }

      .restart-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 152, 0, 0.4);
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes correctAnswer {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      @keyframes slideToPosition {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: #ffd700;
        animation: confettiFall 3s linear infinite;
      }

      @keyframes confettiFall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }

      @media (max-width: 768px) {
        .title {
          font-size: 2rem;
        }
        .materials-grid {
          grid-template-columns: 1fr;
        }
        .steps-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1 class="title">üåç –≠–∫–æ-–°–æ—Ä—Ç–µ—Ä üå±</h1>
        <div class="fun-icons">‚ôªÔ∏è üéÆ üåü üéØ ‚≠ê</div>
        <p class="subtitle">
          –°—É–ø–µ—Ä-–∏–≥—Ä–∞ –æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ –º—É—Å–æ—Ä–∞ –¥–ª—è —ç–∫–æ-—Å–æ—Ä—Ç–µ—Ä–æ–≤!
        </p>
      </div>

      <div class="progress-board">
        <div class="tree-container">
          <span id="tree-stage">üå±</span>
        </div>
        <div>
          –í–∞—à —ç–∫–æ-–ø—Ä–æ–≥—Ä–µ—Å—Å: <span id="progress-text">–†–æ—Å—Ç–æ–∫ –ø–æ—è–≤–∏–ª—Å—è!</span>
        </div>
        <div class="timer" id="timer" style="display: none">
          –í—Ä–µ–º—è: <span id="time-left">2:00</span>
        </div>
      </div>

      <div class="game-area">
        <h2 style="text-align: center; color: #2e7d32; margin-bottom: 20px">
          –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —ç—Ç–∞–ø–æ–≤ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏:
        </h2>

        <div class="materials-grid">
          <div class="material-card" data-material="plastic">
            <span class="material-icon">ü•§</span>
            <div class="material-name">–ü–ª–∞—Å—Ç–∏–∫</div>
            <p>–ë—É—Ç—ã–ª–∫–∏, –ø–∞–∫–µ—Ç—ã, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</p>
          </div>
          <div class="material-card" data-material="paper">
            <span class="material-icon">üìÑ</span>
            <div class="material-name">–ë—É–º–∞–≥–∞</div>
            <p>–ì–∞–∑–µ—Ç—ã, –∫–∞—Ä—Ç–æ–Ω, –∫–Ω–∏–≥–∏</p>
          </div>
          <div class="material-card" data-material="glass">
            <span class="material-icon">üç∂</span>
            <div class="material-name">–°—Ç–µ–∫–ª–æ</div>
            <p>–ë–∞–Ω–∫–∏, –±—É—Ç—ã–ª–∫–∏, –æ–∫–Ω–∞</p>
          </div>
          <div class="material-card" data-material="metal">
            <span class="material-icon">ü•´</span>
            <div class="material-name">–ú–µ—Ç–∞–ª–ª</div>
            <p>–ë–∞–Ω–∫–∏, –ø—Ä–æ–≤–æ–¥–∞, –¥–µ—Ç–∞–ª–∏</p>
          </div>
          <div class="material-card" data-material="hazardous">
            <span class="material-icon">üîã</span>
            <div class="material-name">–û–ø–∞—Å–Ω—ã–µ –æ—Ç—Ö–æ–¥—ã</div>
            <p>–ë–∞—Ç–∞—Ä–µ–π–∫–∏, –ª–∞–º–ø—ã, –∫—Ä–∞—Å–∫–∏</p>
          </div>
        </div>

        <div class="steps-container" id="steps-container" style="display: none">
          <h3 class="steps-title" id="steps-title">
            –†–∞—Å—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–∞–ø—ã –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:
          </h3>

          <div class="correct-steps-area" id="correct-steps-area">
            <div class="correct-steps-title">
              ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
            </div>
            <div
              class="correct-steps-container"
              id="correct-steps-container"
            ></div>
          </div>

          <div class="steps-grid" id="steps-grid"></div>
        </div>

        <div class="controls">
          <button class="btn" id="hint-btn" onclick="showHint()" disabled>
            üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞
          </button>
        </div>

        <div class="hint-box" id="hint-box">
          <h4>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:</h4>
          <p id="hint-text"></p>
        </div>
      </div>
    </div>

    <div class="celebration" id="celebration">
      <div class="celebration-content">
        <h2 class="celebration-title">üéâ –û—Ç–ª–∏—á–Ω–æ!</h2>
        <p id="celebration-text"></p>
        <button class="btn" onclick="closeCelebration()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
      </div>
    </div>

    <div class="celebration final-celebration" id="final-celebration">
      <div class="celebration-content">
        <div class="trophy-container">
          <span class="trophy">üèÜ</span>
          <h2 class="celebration-title">–ü–û–ó–î–†–ê–í–õ–Ø–ï–ú!</h2>
          <span class="trophy">üèÜ</span>
        </div>
        <div class="final-text-container">
          <p class="final-main-text">–¢—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª –∏–≥—Ä—É "–≠–∫–æ-–°–æ—Ä—Ç–µ—Ä"!</p>
          <p class="final-hero-text">
            üåü–¢—ã –ø–æ–ª—É—á–∏–ª –∑–≤–∞–Ω–∏–µ "–≠–ö–û-–ì–ï–†–û–ô" –∏ —Å–ø–∞—Å –ø–ª–∞–Ω–µ—Ç—É –¶–ö–ë–ú 4.0!üåü
          </p>
          <p class="final-description">
            –¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏
            –ø–æ–º–æ–≥–∞—Ç—å –Ω–∞—à–µ–π –ø–ª–∞–Ω–µ—Ç–µ!
          </p>
        </div>
        <div class="final-footer">
          <p class="final-credits">–ò–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ –°–æ–≤–µ—Ç–æ–º –º–æ–ª–æ–¥–µ–∂–∏ –ê–û "–¶–ö–ë–ú"</p>
          <button class="restart-btn" onclick="restartGame()">
            üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
          </button>
        </div>
      </div>
    </div>

    <script>
      const materials = {
        plastic: {
          name: "–ü–ª–∞—Å—Ç–∏–∫",
          icon: "ü•§",
          steps: [
            "–°–±–æ—Ä –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã—Ö –æ—Ç—Ö–æ–¥–æ–≤",
            "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –ø–ª–∞—Å—Ç–∏–∫–∞",
            "–û—á–∏—Å—Ç–∫–∞ –∏ –º–æ–π–∫–∞",
            "–ò–∑–º–µ–ª—å—á–µ–Ω–∏–µ –≤ —Ö–ª–æ–ø—å—è",
            "–ü–ª–∞–≤–ª–µ–Ω–∏–µ –∏ –≥—Ä–∞–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ",
            "–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –∏–∑–¥–µ–ª–∏–π",
          ],
          hints: [
            "–ù–∞—á–Ω–∏—Ç–µ —Å —Å–∞–º–æ–≥–æ –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞ - —á—Ç–æ –¥–µ–ª–∞—é—Ç —Å –º—É—Å–æ—Ä–æ–º?",
            "–ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã –ø–ª–∞—Å—Ç–∏–∫–∞",
            "–ì—Ä—è–∑–Ω—ã–π –ø–ª–∞—Å—Ç–∏–∫ –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å - —á—Ç–æ —Å –Ω–∏–º –¥–µ–ª–∞—é—Ç?",
            "–ß–∏—Å—Ç—ã–π –ø–ª–∞—Å—Ç–∏–∫ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–º –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞",
            "–ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –ø–ª–∞—Å—Ç–∏–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∂–∏–¥–∫–∏–º",
            "–ò–∑ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –¥–µ–ª–∞—é—Ç —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ",
          ],
        },
        paper: {
          name: "–ë—É–º–∞–≥–∞",
          icon: "üìÑ",
          steps: [
            "–°–±–æ—Ä –º–∞–∫—É–ª–∞—Ç—É—Ä—ã",
            "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—á–µ—Å—Ç–≤—É",
            "–†–æ—Å–ø—É—Å–∫ –≤ –≤–æ–¥–µ",
            "–û—á–∏—Å—Ç–∫–∞ –æ—Ç –ø—Ä–∏–º–µ—Å–µ–π",
            "–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–æ–≤",
            "–°—É—à–∫–∞ –∏ —É–ø–∞–∫–æ–≤–∫–∞",
          ],
          hints: [
            "–ü–µ—Ä–≤—ã–π —à–∞–≥ - —Å–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ä—É—é –±—É–º–∞–≥—É",
            "–ù–µ –≤—Å—è –±—É–º–∞–≥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è - –µ—ë –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å",
            "–ë—É–º–∞–≥—É –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç –≤ –∂–∏–¥–∫—É—é –º–∞—Å—Å—É —Å –ø–æ–º–æ—â—å—é –≤–æ–¥—ã",
            "–ò–∑ –º–∞—Å—Å—ã —É–±–∏—Ä–∞—é—Ç —Å–∫—Ä–µ–ø–∫–∏, –∫–ª–µ–π –∏ –¥—Ä—É–≥–æ–π –º—É—Å–æ—Ä",
            "–ò–∑ —á–∏—Å—Ç–æ–π –º–∞—Å—Å—ã –¥–µ–ª–∞—é—Ç —Ç–æ–Ω–∫–∏–µ –ª–∏—Å—Ç—ã",
            "–ú–æ–∫—Ä—ã–µ –ª–∏—Å—Ç—ã –Ω—É–∂–Ω–æ –≤—ã—Å—É—à–∏—Ç—å –∏ —É–ø–∞–∫–æ–≤–∞—Ç—å",
          ],
        },
        glass: {
          name: "–°—Ç–µ–∫–ª–æ",
          icon: "üç∂",
          steps: [
            "–°–±–æ—Ä —Å—Ç–µ–∫–ª—è–Ω–Ω—ã—Ö –æ—Ç—Ö–æ–¥–æ–≤",
            "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–≤–µ—Ç–∞–º",
            "–û—á–∏—Å—Ç–∫–∞ –æ—Ç —ç—Ç–∏–∫–µ—Ç–æ–∫",
            "–î—Ä–æ–±–ª–µ–Ω–∏–µ –Ω–∞ –æ—Å–∫–æ–ª–∫–∏",
            "–ü–ª–∞–≤–ª–µ–Ω–∏–µ –≤ –ø–µ—á–∏",
            "–§–æ—Ä–º–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –∏–∑–¥–µ–ª–∏–π",
          ],
          hints: [
            "–ù–∞—á–∏–Ω–∞–µ–º —Å–æ —Å–±–æ—Ä–∞ —Å—Ç–µ–∫–ª—è–Ω–Ω—ã—Ö –±—É—Ç—ã–ª–æ–∫ –∏ –±–∞–Ω–æ–∫",
            "–ë–µ–ª–æ–µ, –∑–µ–ª–µ–Ω–æ–µ –∏ –∫–æ—Ä–∏—á–Ω–µ–≤–æ–µ —Å—Ç–µ–∫–ª–æ —Ä–∞–∑–¥–µ–ª—è—é—Ç",
            "–° –±—É—Ç—ã–ª–æ–∫ —Å–Ω–∏–º–∞—é—Ç –Ω–∞–∫–ª–µ–π–∫–∏ –∏ —ç—Ç–∏–∫–µ—Ç–∫–∏",
            "–°—Ç–µ–∫–ª–æ —Ä–∞–∑–±–∏–≤–∞—é—Ç –Ω–∞ –º–µ–ª–∫–∏–µ –∫—É—Å–æ—á–∫–∏",
            "–í –æ—á–µ–Ω—å –≥–æ—Ä—è—á–µ–π –ø–µ—á–∏ —Å—Ç–µ–∫–ª–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∂–∏–¥–∫–∏–º",
            "–ò–∑ –∂–∏–¥–∫–æ–≥–æ —Å—Ç–µ–∫–ª–∞ –¥–µ–ª–∞—é—Ç –Ω–æ–≤—ã–µ –±—É—Ç—ã–ª–∫–∏ –∏ –±–∞–Ω–∫–∏",
          ],
        },
        metal: {
          name: "–ú–µ—Ç–∞–ª–ª",
          icon: "ü•´",
          steps: [
            "–°–±–æ—Ä –º–µ—Ç–∞–ª–ª–æ–ª–æ–º–∞",
            "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –º–µ—Ç–∞–ª–ª–∞",
            "–û—á–∏—Å—Ç–∫–∞ –æ—Ç –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–π",
            "–ò–∑–º–µ–ª—å—á–µ–Ω–∏–µ –∏ –ø—Ä–µ—Å—Å–æ–≤–∞–Ω–∏–µ",
            "–ü–ª–∞–≤–ª–µ–Ω–∏–µ –≤ –ø–µ—á–∏",
            "–õ–∏—Ç—å–µ –Ω–æ–≤—ã—Ö –∏–∑–¥–µ–ª–∏–π",
          ],
          hints: [
            "–°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ä—ã–µ –±–∞–Ω–∫–∏, –ø—Ä–æ–≤–æ–¥–∞ –∏ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏",
            "–ñ–µ–ª–µ–∑–æ, –∞–ª—é–º–∏–Ω–∏–π –∏ –º–µ–¥—å - —Ä–∞–∑–Ω—ã–µ –º–µ—Ç–∞–ª–ª—ã",
            "–ú–µ—Ç–∞–ª–ª –æ—á–∏—â–∞—é—Ç –æ—Ç –∫—Ä–∞—Å–∫–∏, —Ä–∂–∞–≤—á–∏–Ω—ã –∏ –≥—Ä—è–∑–∏",
            "–ú–µ—Ç–∞–ª–ª —Ä–µ–∂—É—Ç –∏ —Å–∂–∏–º–∞—é—Ç, —á—Ç–æ–±—ã –æ–Ω –∑–∞–Ω–∏–º–∞–ª –º–µ–Ω—å—à–µ –º–µ—Å—Ç–∞",
            "–í –ø–µ—á–∏ –º–µ—Ç–∞–ª–ª –ø–ª–∞–≤–∏—Ç—Å—è –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∂–∏–¥–∫–∏–º",
            "–ò–∑ –∂–∏–¥–∫–æ–≥–æ –º–µ—Ç–∞–ª–ª–∞ –æ—Ç–ª–∏–≤–∞—é—Ç –Ω–æ–≤—ã–µ –¥–µ—Ç–∞–ª–∏",
          ],
        },
        hazardous: {
          name: "–û–ø–∞—Å–Ω—ã–µ –æ—Ç—Ö–æ–¥—ã",
          icon: "üîã",
          steps: [
            "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–±–æ—Ä",
            "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
            "–î–µ–º–æ–Ω—Ç–∞–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤",
            "–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ü–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",
            "–ù–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–∫—Å–∏–Ω–æ–≤",
            "–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤",
          ],
          hints: [
            "–û–ø–∞—Å–Ω—ã–µ –æ—Ç—Ö–æ–¥—ã —Å–æ–±–∏—Ä–∞—é—Ç –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã",
            "–ë–∞—Ç–∞—Ä–µ–π–∫–∏, –ª–∞–º–ø—ã –∏ –∫—Ä–∞—Å–∫–∏ - —Ä–∞–∑–Ω–∞—è —Å—Ç–µ–ø–µ–Ω—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
            "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ä–∞–∑–±–∏—Ä–∞—é—Ç –Ω–∞ —á–∞—Å—Ç–∏ –æ—á–µ–Ω—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ",
            "–ò–∑ –±–∞—Ç–∞—Ä–µ–µ–∫ –¥–æ—Å—Ç–∞—é—Ç –ø–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–∞–ª–ª—ã",
            "–í—Ä–µ–¥–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞ –¥–µ–ª–∞—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏",
            "–¢–æ, —á—Ç–æ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, —É—Ç–∏–ª–∏–∑–∏—Ä—É—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ",
          ],
        },
      };

      let currentMaterial = null;
      let currentSteps = [];
      let correctOrder = [];
      let completedMaterials = [];
      let selectedSteps = [];
      let correctStepsCount = 0;
      let timer = null;
      let timeLeft = 120; // 2 –º–∏–Ω—É—Ç—ã –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

      const treeStages = ["üå±", "üåø", "üå≥", "üå≤", "üå≥üå≤"];
      const treeTexts = [
        "–†–æ—Å—Ç–æ–∫ –ø–æ—è–≤–∏–ª—Å—è!",
        "–†–æ—Å—Ç–æ–∫ –ø–æ–¥—Ä–æ—Å!",
        "–í—ã—Ä–æ—Å–ª–æ –º–∞–ª–µ–Ω—å–∫–æ–µ –¥–µ—Ä–µ–≤–æ!",
        "–î–µ—Ä–µ–≤–æ —Å—Ç–∞–ª–æ –±–æ–ª—å—à–µ!",
        "–¶–µ–ª—ã–π –ª–µ—Å! –í—ã - –Ω–∞—Å—Ç–æ—è—â–∏–π –≠–∫–æ-–ì–µ—Ä–æ–π!",
      ];

      function selectMaterial(materialKey) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª
        const materialOrder = [
          "plastic",
          "paper",
          "glass",
          "metal",
          "hazardous",
        ];
        const materialIndex = materialOrder.indexOf(materialKey);

        if (materialIndex > completedMaterials.length) {
          return; // –ú–∞—Ç–µ—Ä–∏–∞–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
        }

        // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
        document.querySelectorAll(".material-card").forEach((card) => {
          card.classList.remove("selected");
        });

        // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
        document
          .querySelector(`[data-material="${materialKey}"]`)
          .classList.add("selected");

        currentMaterial = materialKey;
        const material = materials[materialKey];

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —ç—Ç–∞–ø–∞–º–∏
        document.getElementById("steps-container").style.display = "block";
        document.getElementById(
          "steps-title"
        ).textContent = `–†–∞—Å—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–∞–ø—ã –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ "${material.name}" –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:`;

        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —ç—Ç–∞–ø—ã
        correctOrder = [...material.steps];
        currentSteps = [...material.steps].sort(() => Math.random() - 0.5);
        selectedSteps = [];
        correctStepsCount = 0;

        displaySteps();
        startTimer();

        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
        document.getElementById("hint-btn").disabled = false;
      }

      function displaySteps() {
        const stepsGrid = document.getElementById("steps-grid");
        stepsGrid.innerHTML = "";

        currentSteps.forEach((step, index) => {
          const stepElement = document.createElement("div");
          stepElement.className = "step-item";
          stepElement.textContent = step;
          stepElement.onclick = () => selectStep(index, stepElement);
          stepsGrid.appendChild(stepElement);
        });
      }

      function selectStep(index, element) {
        const step = currentSteps[index];
        const correctIndex = correctOrder.indexOf(step);

        if (element.classList.contains("correct-order")) {
          return; // –£–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
        if (correctIndex === correctStepsCount) {
          // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç—Ç–∞–ø!
          element.classList.add("correct-order");
          element.setAttribute("data-order", correctStepsCount + 1);

          // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –≤ –æ–±–ª–∞—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
          const correctContainer = document.getElementById(
            "correct-steps-container"
          );
          element.remove();
          correctContainer.appendChild(element);

          correctStepsCount++;

          // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ä–µ–≤–æ
          updateTree();

          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ —ç—Ç–∞–ø—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã
          if (correctStepsCount === correctOrder.length) {
            setTimeout(() => {
              completeMaterial();
            }, 1000);
          }
        } else {
          // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç—Ç–∞–ø
          element.classList.add("incorrect");
          setTimeout(() => {
            element.classList.remove("incorrect");
          }, 1000);
        }
      }

      function startTimer() {
        timeLeft = 120; // 2 –º–∏–Ω—É—Ç—ã
        document.getElementById("timer").style.display = "block";
        updateTimerDisplay();

        timer = setInterval(() => {
          timeLeft--;
          updateTimerDisplay();

          if (timeLeft <= 0) {
            clearInterval(timer);
            showCelebration(
              "‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ!",
              "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ —Å –¥—Ä—É–≥–∏–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–º!"
            );
            nextMaterial();
          }
        }, 1000);
      }

      function updateTimerDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById("time-left").textContent = `${minutes}:${seconds
          .toString()
          .padStart(2, "0")}`;
      }

      function updateTree() {
        const totalProgress = completedMaterials.length * 6 + correctStepsCount;
        const stageIndex = Math.min(Math.floor(totalProgress / 6), 4);

        document.getElementById("tree-stage").textContent =
          treeStages[stageIndex];
        document.getElementById("progress-text").textContent =
          treeTexts[stageIndex];
      }

      function completeMaterial() {
        clearInterval(timer);
        document.getElementById("timer").style.display = "none";

        completedMaterials.push(currentMaterial);

        // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
        updateMaterialCards();

        showCelebration(
          "üéâ –û—Ç–ª–∏—á–Ω–æ!",
          `–í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—Ç–∞–≤–∏–ª–∏ –≤—Å–µ —ç—Ç–∞–ø—ã –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ "${materials[currentMaterial].name}"!`
        );
      }

      function updateMaterialCards() {
        const materialOrder = [
          "plastic",
          "paper",
          "glass",
          "metal",
          "hazardous",
        ];

        materialOrder.forEach((materialKey, index) => {
          const card = document.querySelector(
            `[data-material="${materialKey}"]`
          );

          if (completedMaterials.includes(materialKey)) {
            // –ü—Ä–æ–π–¥–µ–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª
            card.classList.add("completed");
            card.classList.remove("locked");
          } else if (index <= completedMaterials.length) {
            // –î–æ—Å—Ç—É–ø–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª
            card.classList.remove("locked", "completed");
          } else {
            // –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª
            card.classList.add("locked");
            card.classList.remove("completed");
          }
        });
      }

      function showHint() {
        const hintBox = document.getElementById("hint-box");
        const hintText = document.getElementById("hint-text");

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞
        const nextHintIndex = correctStepsCount;
        if (nextHintIndex < materials[currentMaterial].hints.length) {
          hintText.textContent =
            materials[currentMaterial].hints[nextHintIndex];
        } else {
          hintText.textContent = "–í—ã –ø–æ—á—Ç–∏ —É —Ü–µ–ª–∏! –û—Å—Ç–∞–ª–æ—Å—å —Å–æ–≤—Å–µ–º –Ω–µ–º–Ω–æ–≥–æ!";
        }

        hintBox.classList.add("show");

        // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É —á–µ—Ä–µ–∑ 8 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
          hintBox.classList.remove("show");
        }, 8000);
      }

      function nextMaterial() {
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
        if (timer) {
          clearInterval(timer);
        }
        document.getElementById("timer").style.display = "none";

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–æ–π–¥–µ–Ω—ã
        if (completedMaterials.length >= 5) {
          showFinalCelebration();
          return;
        }

        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª
        currentMaterial = null;
        selectedSteps = [];
        correctStepsCount = 0;

        // –û—á–∏—â–∞–µ–º –æ–±–ª–∞—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        document.getElementById("correct-steps-container").innerHTML = "";

        // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –∫–∞—Ä—Ç–æ—á–µ–∫
        document.querySelectorAll(".material-card").forEach((card) => {
          card.classList.remove("selected");
        });

        // –°–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —ç—Ç–∞–ø–∞–º–∏
        document.getElementById("steps-container").style.display = "none";

        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏
        document.getElementById("hint-btn").disabled = true;

        // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
        document.getElementById("hint-box").classList.remove("show");
      }

      function showCelebration(title, text) {
        document.getElementById("celebration").classList.add("show");
        document.querySelector(".celebration-title").textContent = title;
        document.getElementById("celebration-text").textContent = text;

        // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        if (title.includes("–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ")) {
          createConfetti();
        }
      }

      function closeCelebration() {
        document.getElementById("celebration").classList.remove("show");

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –º–∞—Ç–µ—Ä–∏–∞–ª—É
        nextMaterial();

        // –ï—Å–ª–∏ –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ–≥–æ –≤—ã–±–∏—Ä–∞–µ–º
        const materialOrder = [
          "plastic",
          "paper",
          "glass",
          "metal",
          "hazardous",
        ];
        const nextMaterialIndex = completedMaterials.length;

        if (nextMaterialIndex < materialOrder.length) {
          setTimeout(() => {
            selectMaterial(materialOrder[nextMaterialIndex]);
          }, 500);
        }
      }

      function showFinalCelebration() {
        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ä–µ–≤–æ –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç–∞–¥–∏–∏
        document.getElementById("tree-stage").textContent = treeStages[4];
        document.getElementById("progress-text").textContent = treeTexts[4];

        document.getElementById("final-celebration").classList.add("show");
        createConfetti();
        createFireworks();
      }

      function createConfetti() {
        const colors = [
          "#FFD700",
          "#FF6B6B",
          "#4ECDC4",
          "#45B7D1",
          "#96CEB4",
          "#FECA57",
        ];

        for (let i = 0; i < 50; i++) {
          setTimeout(() => {
            const confetti = document.createElement("div");
            confetti.className = "confetti";
            confetti.style.left = Math.random() * 100 + "%";
            confetti.style.backgroundColor =
              colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDelay = Math.random() * 2 + "s";
            document.body.appendChild(confetti);

            setTimeout(() => {
              confetti.remove();
            }, 3000);
          }, i * 100);
        }
      }

      function createFireworks() {
        const colors = [
          "#FF6B6B",
          "#4ECDC4",
          "#45B7D1",
          "#96CEB4",
          "#FECA57",
          "#FF9800",
          "#E91E63",
          "#9C27B0",
          "#00BCD4",
        ];

        for (let i = 0; i < 40; i++) {
          setTimeout(() => {
            // –°–æ–∑–¥–∞–µ–º —Ü–µ–Ω—Ç—Ä –≤–∑—Ä—ã–≤–∞
            const centerX = 20 + Math.random() * 60; // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –≤–∑—Ä—ã–≤–∞
            const centerY = 20 + Math.random() * 60;

            // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∞
            for (let j = 0; j < 15; j++) {
              const firework = document.createElement("div");
              firework.className = "firework";
              firework.style.left = centerX + "%";
              firework.style.top = centerY + "%";
              firework.style.backgroundColor =
                colors[Math.floor(Math.random() * colors.length)];
              firework.style.width = 3 + Math.random() * 4 + "px";
              firework.style.height = firework.style.width;

              // –°–ª—É—á–∞–π–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏—Ü—ã
              const angle = j * 24 + Math.random() * 24; // 360/15 = 24 –≥—Ä–∞–¥—É—Å–∞ –º–µ–∂–¥—É —á–∞—Å—Ç–∏—Ü–∞–º–∏
              const distance = 30 + Math.random() * 80;
              const dx = Math.cos((angle * Math.PI) / 180) * distance;
              const dy = Math.sin((angle * Math.PI) / 180) * distance;

              firework.style.setProperty("--dx", dx + "px");
              firework.style.setProperty("--dy", dy + "px");

              firework.style.animation = `fireworkExplode 2.5s ease-out forwards`;
              firework.style.animationDelay = Math.random() * 0.8 + "s";

              // –î–æ–±–∞–≤–ª—è–µ–º –±–ª–µ—Å–∫
              firework.style.boxShadow = `0 0 6px ${
                colors[Math.floor(Math.random() * colors.length)]
              }`;

              document
                .getElementById("final-celebration")
                .appendChild(firework);

              setTimeout(() => {
                if (firework.parentNode) {
                  firework.remove();
                }
              }, 4000);
            }
          }, i * 150);
        }
      }

      function restartGame() {
        completedMaterials = [];
        currentMaterial = null;
        selectedSteps = [];
        correctStepsCount = 0;

        if (timer) {
          clearInterval(timer);
        }

        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–µ—Ä–µ–≤–æ
        document.getElementById("tree-stage").textContent = treeStages[0];
        document.getElementById("progress-text").textContent = treeTexts[0];

        // –û—á–∏—â–∞–µ–º –æ–±–ª–∞—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        document.getElementById("correct-steps-container").innerHTML = "";

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
        updateMaterialCards();

        document.getElementById("final-celebration").classList.remove("show");
        document.getElementById("timer").style.display = "none";
        document.querySelectorAll(".material-card").forEach((card) => {
          card.classList.remove("selected");
        });
        document.getElementById("steps-container").style.display = "none";
        document.getElementById("hint-box").classList.remove("show");

        document.getElementById("hint-btn").disabled = true;
      }

      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
      document.querySelectorAll(".material-card").forEach((card) => {
        card.addEventListener("click", () => {
          const material = card.getAttribute("data-material");
          const materialOrder = [
            "plastic",
            "paper",
            "glass",
            "metal",
            "hazardous",
          ];
          const materialIndex = materialOrder.indexOf(material);

          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª
          if (
            materialIndex <= completedMaterials.length &&
            !completedMaterials.includes(material)
          ) {
            selectMaterial(material);
          }
        });
      });

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
      updateMaterialCards();
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'96e20ca4c0c1fa7e',t:'MTc1NTAyMzQ4My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
